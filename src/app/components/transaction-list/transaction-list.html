<h2 style="display: inline-block;">Transações</h2>
<button (click)="openCreateModal()">Novo gasto</button>
<button (click)="openCategoryModal()">Nova Categoria</button>

<input style="display: block;" type="text" placeholder="Filtrar por descrição" [(ngModel)]="filterText"
  (input)="applyFilter()" />

<!-- 1️⃣ LOADING -->
<div *ngIf="isLoading">
  Carregando transações...
</div>

<!-- 2️⃣ ERRO -->
<div *ngIf="errorMessage">
  {{ errorMessage }}
</div>

<!-- 3️⃣ TABELA -->
<table *ngIf="!isLoading && filteredTransactions.length">
  <thead>
    <tr>
      <th>Data</th>
      <th>Descrição</th>
      <th>Categoria</th>
      <th>Pagamento</th>
      <th>Valor</th>
      <th>Ações</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let t of filteredTransactions">
      <td>{{ t.transactionDate | date:'dd/MM/yyyy' }}</td>
      <td>{{ t.transactionDescription }}</td>
      <td>{{ t.categoryName }}</td>
      <td>{{ t.paymentMethod }}</td>
      <td>{{ t.transactionValue | currency:'BRL' }}</td>
      <td>
        <button (click)="editTransaction(t)">Editar</button>
        <button (click)="deleteTransaction(t)">Excluir</button>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="isEditModalOpen" class="modal-backdrop">
  <div class="modal-content">
    <app-transaction-edit [transactionId]="selectedTransactionId!" (close)="closeModal()"
      (saved)="onSaved()">
    </app-transaction-edit>
  </div>
</div>

<div *ngIf="isCreateModalOpen" class="modal-backdrop">
  <div class="modal-content">
    <app-transaction-create (close)="closeModal()" (saved)="onSaved()" />
  </div>
</div>

<div *ngIf="isCreateCategoryModalOpen" class="modal-backdrop">
  <div class="modal-content">
    <app-category-create (close)="closeModal()" (saved)="onSaved()" />
  </div>
</div>


<!-- 4️⃣ LISTA VAZIA -->
<div *ngIf="!isLoading && !filteredTransactions.length">
  Nenhuma transação encontrada.
</div>